import{s as J,d as F,e as ee,c as me,u as pe,g as ge,a as be,r as ve,b as te,o as ke,n as we,f as se,t as ye,h as Se}from"../chunks/scheduler.CRj-FdYT.js";import{S as L,i as Q,c as A,b as j,m as R,t as k,e as I,g as q,h as y,s as C,n as W,j as S,o as E,f as p,a as z,k as Ee,p as Y,l as w,d as N,q as b,u as ne,v as $,w as H,x as K,y as de,z as O,r as _e,A as le,B as Ie,C as De}from"../chunks/index.C6ozi9ya.js";import{e as U,m as Z,c as Te,u as Ne}from"../chunks/stores.Bnxv-Xxq.js";import{g as ae,S as Ve,I as Ce,G as ze,N as Be,E as Pe,P as $e,a as Ae,f as re}from"../chunks/Marital.svelte_svelte_type_style_lang.yZ12Mra7.js";import{I as Re,g as qe,a as Ge}from"../chunks/Icon.7Cz5uB_8.js";function Me(r){let e;const t=r[2].default,l=me(t,r,r[3],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,n){l&&l.m(s,n),e=!0},p(s,n){l&&l.p&&(!e||n&8)&&pe(l,t,s,s[3],e?be(t,s[3],n,null):ge(s[3]),null)},i(s){e||(k(l,s),e=!0)},o(s){I(l,s),e=!1},d(s){l&&l.d(s)}}}function Oe(r){let e,t;const l=[{name:"send-horizontal"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Me]},$$scope:{ctx:r}};for(let n=0;n<l.length;n+=1)s=F(s,l[n]);return e=new Re({props:s}),{c(){A(e.$$.fragment)},l(n){j(e.$$.fragment,n)},m(n,a){R(e,n,a),t=!0},p(n,[a]){const f=a&3?qe(l,[l[0],a&2&&Ge(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(f.$$scope={dirty:a,ctx:n}),e.$set(f)},i(n){t||(k(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Ue(r,e,t){let{$$slots:l={},$$scope:s}=e;const n=[["path",{d:"m3 3 3 9-3 9 19-9Z"}],["path",{d:"M6 12h16"}]];return r.$$set=a=>{t(1,e=F(F({},e),ee(a))),"$$scope"in a&&t(3,s=a.$$scope)},e=ee(e),[n,e,l,s]}class je extends L{constructor(e){super(),Q(this,e,Ue,Oe,J,{})}}function oe(r,e,t){const l=r.slice();return l[18]=e[t].role,l[19]=e[t].content,l}function He(r){let e,t=r[19]+"",l;return{c(){e=y("div"),l=W(t),this.h()},l(s){e=S(s,"DIV",{class:!0});var n=E(e);l=Y(n,t),n.forEach(p),this.h()},h(){w(e,"class","ml-auto w-4/5 rounded-lg bg-fidelity-green-600 p-2 text-white")},m(s,n){N(s,e,n),b(e,l)},p(s,n){n&128&&t!==(t=s[19]+"")&&_e(l,t)},d(s){s&&p(e)}}}function Ke(r){let e,t,l=r[19]+"",s,n;return{c(){e=y("div"),t=y("div"),s=W(l),n=C(),this.h()},l(a){e=S(a,"DIV",{class:!0});var f=E(e);t=S(f,"DIV",{class:!0});var i=E(t);s=Y(i,l),i.forEach(p),n=z(f),f.forEach(p),this.h()},h(){w(t,"class","rounded-lg bg-slate-200 p-2"),w(e,"class","w-4/5")},m(a,f){N(a,e,f),b(e,t),b(t,s),b(e,n)},p(a,f){f&128&&l!==(l=a[19]+"")&&_e(s,l)},d(a){a&&p(e)}}}function ie(r){let e;function t(n,a){return n[18]==="assistant"?Ke:He}let l=t(r),s=l(r);return{c(){s.c(),e=O()},l(n){s.l(n),e=O()},m(n,a){s.m(n,a),N(n,e,a)},p(n,a){l===(l=t(n))&&s?s.p(n,a):(s.d(1),s=l(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&p(e),s.d(n)}}}function ce(r){let e,t,l,s,n;return t=new je({props:{class:"h-4 w-4 text-fidelity-green-600 border-fidelity-green-600"}}),{c(){e=y("button"),A(t.$$.fragment),this.h()},l(a){e=S(a,"BUTTON",{class:!0});var f=E(e);j(t.$$.fragment,f),f.forEach(p),this.h()},h(){w(e,"class","absolute bottom-2 right-2")},m(a,f){N(a,e,f),R(t,e,null),l=!0,s||(n=$(e,"click",r[15]),s=!0)},p:we,i(a){l||(k(t.$$.fragment,a),l=!0)},o(a){I(t.$$.fragment,a),l=!1},d(a){a&&p(e),q(t),s=!1,n()}}}function Xe(r){let e,t,l,s,n,a,f,i,o,u="Back",h,v,B,V,P,G,T=U(r[7]),g=[];for(let d=0;d<T.length;d+=1)g[d]=ie(oe(r,T,d));let _=r[4].length>0&&ce(r);return{c(){e=y("div"),t=y("div");for(let d=0;d<g.length;d+=1)g[d].c();l=C(),s=y("div"),n=y("textarea"),a=C(),_&&_.c(),f=C(),i=y("div"),o=y("button"),o.textContent=u,h=C(),v=y("button"),B=W("See Recommendations"),this.h()},l(d){e=S(d,"DIV",{class:!0});var c=E(e);t=S(c,"DIV",{class:!0});var m=E(t);for(let X=0;X<g.length;X+=1)g[X].l(m);m.forEach(p),l=z(c),s=S(c,"DIV",{class:!0});var D=E(s);n=S(D,"TEXTAREA",{class:!0,placeholder:!0}),E(n).forEach(p),a=z(D),_&&_.l(D),f=z(D),i=S(D,"DIV",{class:!0});var M=E(i);o=S(M,"BUTTON",{class:!0,"data-svelte-h":!0}),Ee(o)!=="svelte-1admezx"&&(o.textContent=u),h=z(M),v=S(M,"BUTTON",{class:!0});var x=E(v);B=Y(x,"See Recommendations"),x.forEach(p),M.forEach(p),D.forEach(p),c.forEach(p),this.h()},h(){w(t,"class","mx-auto h-2/3 w-1/2 space-y-4 overflow-y-auto pb-6"),w(n,"class","h-full w-full resize-none rounded-lg p-1.5 text-sm outline-none ring-0"),w(n,"placeholder","Type a message..."),w(o,"class","back"),w(v,"class","next"),v.disabled=r[6],w(i,"class","grid grid-cols-2 w-3/4 mx-auto pt-8 gap-4"),w(s,"class","mx-auto h-16 w-1/2 relative"),w(e,"class","h-[calc(100vh-240px)] pt-[4vh]")},m(d,c){N(d,e,c),b(e,t);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(t,null);r[11](t),b(e,l),b(e,s),b(s,n),r[12](n),ne(n,r[4]),b(s,a),_&&_.m(s,null),b(s,f),b(s,i),b(i,o),b(i,h),b(i,v),b(v,B),V=!0,P||(G=[$(n,"input",r[13]),$(n,"keydown",r[14]),$(o,"click",r[16]),$(v,"click",r[17])],P=!0)},p(d,[c]){if(c&128){T=U(d[7]);let m;for(m=0;m<T.length;m+=1){const D=oe(d,T,m);g[m]?g[m].p(D,c):(g[m]=ie(D),g[m].c(),g[m].m(t,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=T.length}c&16&&ne(n,d[4]),d[4].length>0?_?(_.p(d,c),c&16&&k(_,1)):(_=ce(d),_.c(),k(_,1),_.m(s,f)):_&&(H(),I(_,1,1,()=>{_=null}),K()),(!V||c&64)&&(v.disabled=d[6])},i(d){V||(k(_),V=!0)},o(d){I(_),V=!1},d(d){d&&p(e),de(g,d),r[11](null),r[12](null),_&&_.d(),P=!1,ve(G)}}}function Ze(r,e,t){let l,s,n;te(r,Z,c=>t(7,s=c)),te(r,Te,c=>t(10,n=c));let a,f="",i,{back:o}=e,{next:u}=e,{changeStep:h=c=>{}}=e;ke(async()=>{await ae("Please briefly but kindly greet the current user by name and then ask the first question"),Z.subscribe(c=>{setTimeout(()=>{i&&t(5,i.scrollTop=i.scrollHeight,i)},10)}),a&&a.focus()});const v=()=>{Z.update(c=>[...c,{role:"user",content:a.value}]),Ne.update(c=>({...c,messages:s})),t(3,a.value="",a),t(4,f=""),a.focus(),ae("")},B=c=>{c.key==="Enter"&&(c.preventDefault(),v())};function V(c){se[c?"unshift":"push"](()=>{i=c,t(5,i)})}function P(c){se[c?"unshift":"push"](()=>{a=c,t(3,a)})}function G(){f=this.value,t(4,f)}const T=c=>B(c),g=()=>{v()},_=()=>h(o),d=()=>h(u);return r.$$set=c=>{"back"in c&&t(0,o=c.back),"next"in c&&t(1,u=c.next),"changeStep"in c&&t(2,h=c.changeStep)},r.$$.update=()=>{r.$$.dirty&1024&&t(6,l=!n)},[o,u,h,a,f,i,l,s,v,B,n,V,P,G,T,g,_,d]}class Fe extends L{constructor(e){super(),Q(this,e,Ze,Xe,J,{back:0,next:1,changeStep:2})}}function fe(r,e,t){const l=r.slice();return l[6]=e[t],l[8]=t,l}function ue(r){let e,t,l,s,n,a;var f=r[4][r[8]];function i(o,u){return{props:{back:o[8]-1,next:o[8]+1,changeStep:o[5]}}}return f&&(t=le(f,i(r))),{c(){e=y("div"),t&&A(t.$$.fragment),l=C(),this.h()},l(o){e=S(o,"DIV",{class:!0});var u=E(e);t&&j(t.$$.fragment,u),l=z(u),u.forEach(p),this.h()},h(){w(e,"class","h-full w-full")},m(o,u){N(o,e,u),t&&R(t,e,null),b(e,l),a=!0},p(o,u){if(f!==(f=o[4][o[8]])){if(t){H();const h=t;I(h.$$.fragment,1,0,()=>{q(h,1)}),K()}f?(t=le(f,i(o)),A(t.$$.fragment),k(t.$$.fragment,1),R(t,e,l)):t=null}},i(o){a||(t&&k(t.$$.fragment,o),o&&Se(()=>{a&&(n&&n.end(1),s=Ie(e,re,{duration:300}),s.start())}),a=!0)},o(o){t&&I(t.$$.fragment,o),s&&s.invalidate(),o&&(n=De(e,re,{duration:300})),a=!1},d(o){o&&p(e),t&&q(t),o&&n&&n.end()}}}function he(r){let e,t,l=r[8]===r[1]&&ue(r);return{c(){l&&l.c(),e=O()},l(s){l&&l.l(s),e=O()},m(s,n){l&&l.m(s,n),N(s,e,n),t=!0},p(s,n){s[8]===s[1]?l?(l.p(s,n),n&2&&k(l,1)):(l=ue(s),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(H(),I(l,1,1,()=>{l=null}),K())},i(s){t||(k(l),t=!0)},o(s){I(l),t=!1},d(s){s&&p(e),l&&l.d(s)}}}function Je(r){let e,t,l,s;t=new Ve({props:{steps:r[3],displayedStep:r[2],maxStep:r[0],changeStep:r[5]}});let n=U(r[3]),a=[];for(let i=0;i<n.length;i+=1)a[i]=he(fe(r,n,i));const f=i=>I(a[i],1,1,()=>{a[i]=null});return{c(){e=y("div"),A(t.$$.fragment),l=C();for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=S(i,"DIV",{class:!0});var o=E(e);j(t.$$.fragment,o),l=z(o);for(let u=0;u<a.length;u+=1)a[u].l(o);o.forEach(p),this.h()},h(){w(e,"class","w-full bg-fidelity-neutral-50")},m(i,o){N(i,e,o),R(t,e,null),b(e,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);s=!0},p(i,[o]){const u={};if(o&4&&(u.displayedStep=i[2]),o&1&&(u.maxStep=i[0]),t.$set(u),o&50){n=U(i[3]);let h;for(h=0;h<n.length;h+=1){const v=fe(i,n,h);a[h]?(a[h].p(v,o),k(a[h],1)):(a[h]=he(v),a[h].c(),k(a[h],1),a[h].m(e,null))}for(H(),h=n.length;h<a.length;h+=1)f(h);K()}},i(i){if(!s){k(t.$$.fragment,i);for(let o=0;o<n.length;o+=1)k(a[o]);s=!0}},o(i){I(t.$$.fragment,i),a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)I(a[o]);s=!1},d(i){i&&p(e),q(t),de(a,i)}}}function Le(r,e,t){const l=["Intro","Goals","Name","Email","Password","Chat","Summary"],s=[Ce,ze,Be,Pe,$e,Fe,Ae];let n=0,a=0,f=0;async function i(o){t(1,a=-1),await ye(),setTimeout(()=>{t(1,a=o),t(2,f=o),o>=n&&t(0,n=o)},300)}return[n,a,f,l,s,i]}class tt extends L{constructor(e){super(),Q(this,e,Le,Je,J,{})}}export{tt as component};
